---
// Secure Contact Form with GDPR compliance
// Uses Web3Forms for serverless form handling (free tier, no backend needed)
// Replace YOUR_ACCESS_KEY with actual key from https://web3forms.com
---

<form
  id="contact-form"
  action="https://api.web3forms.com/submit"
  method="POST"
  class="space-y-6"
>
  <!-- Web3Forms Access Key - REPLACE WITH YOUR KEY -->
  <input type="hidden" name="access_key" value="0f46b7a8-674b-4bde-a033-7a90bff01309" />

  <!-- Honeypot Spam Prevention -->
  <input type="checkbox" name="botcheck" class="hidden" style="display: none" />

  <!-- Subject -->
  <input type="hidden" name="subject" value="New Inquiry from Boavista Go Website" />

  <!-- Redirect after submission -->
  <input type="hidden" name="redirect" value="https://boavistagotours.com/contact?success=true" />

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Name -->
    <div>
      <label for="name" class="block text-sm font-medium text-dark mb-2">
        Full Name <span class="text-primary">*</span>
      </label>
      <input
        type="text"
        id="name"
        name="name"
        required
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors"
        placeholder="Your name"
      />
    </div>

    <!-- Email -->
    <div>
      <label for="email" class="block text-sm font-medium text-dark mb-2">
        Email Address <span class="text-primary">*</span>
      </label>
      <input
        type="email"
        id="email"
        name="email"
        required
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors"
        placeholder="your@email.com"
      />
    </div>
  </div>

  <!-- Phone -->
  <div>
    <label for="phone" class="block text-sm font-medium text-dark mb-2">
      Phone Number
    </label>
    <input
      type="tel"
      id="phone"
      name="phone"
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors"
      placeholder="+1 234 567 890"
    />
  </div>

  <!-- Tour Interest -->
  <div>
    <label for="tour" class="block text-sm font-medium text-dark mb-2">
      Interested Tour
    </label>
    <select
      id="tour"
      name="tour"
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors bg-white"
    >
      <option value="">Select a tour (optional)</option>
      <option value="4x4 Full Day Island Tour">4x4 Full Day Island Tour</option>
      <option value="Whale Watching Expedition">Whale Watching Expedition</option>
      <option value="4WD Buggy Adventure">4WD Buggy Adventure</option>
      <option value="Off-Road Quad Bike Tour">Off-Road Quad Bike Tour</option>
      <option value="4x4 HD North - The Different Side">4x4 HD North - The Different Side</option>
      <option value="4x4 HD South - The Big Surprise">4x4 HD South - The Big Surprise</option>
      <option value="Traditional & Cultural Tour">Traditional & Cultural Tour</option>
      <option value="Sandboarding Experience">Sandboarding Experience</option>
      <option value="4x4 HD Turtle, Shark, Santa Monica, Sandboarding & Local Taste">4x4 HD Turtle, Shark, Santa Monica, Sandboarding & Local Taste</option>
      <option value="Turtle Watching Expedition">Turtle Watching Expedition</option>
      <option value="Other">Other</option>
    </select>
  </div>

  <!-- Message -->
  <div>
    <label for="message" class="block text-sm font-medium text-dark mb-2">
      Message <span class="text-primary">*</span>
    </label>
    <textarea
      id="message"
      name="message"
      required
      rows="5"
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-colors resize-none"
      placeholder="Tell us about your travel plans, group size, preferred dates..."
    ></textarea>
  </div>

  <!-- GDPR Consent -->
  <div class="flex items-start gap-3">
    <input
      type="checkbox"
      id="gdpr-consent"
      name="gdpr_consent"
      required
      class="mt-1 w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"
    />
    <label for="gdpr-consent" class="text-sm text-gray-600">
      I agree to the <a href="/privacy-policy" class="text-primary hover:underline">Privacy Policy</a> and consent to Boavista Go storing my submitted information so they can respond to my inquiry. <span class="text-primary">*</span>
    </label>
  </div>

  <!-- Submit Button -->
  <button
    type="submit"
    class="w-full md:w-auto px-8 py-4 bg-primary text-white font-semibold rounded-lg hover:bg-primary-700 transition-colors flex items-center justify-center gap-2"
  >
    <span>Send Message</span>
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
    </svg>
  </button>
</form>

<!-- Success Message -->
<div id="success-message" class="hidden p-6 bg-green-50 border border-green-200 rounded-lg">
  <div class="flex items-center gap-3">
    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <div>
      <h4 class="font-semibold text-green-800">Message Sent!</h4>
      <p class="text-green-700 text-sm">Thank you for contacting us. We'll get back to you within 24 hours.</p>
    </div>
  </div>
</div>

<script>
  // Check for success parameter in URL
  const urlParams = new URLSearchParams(window.location.search);
  if (urlParams.get('success') === 'true') {
    document.getElementById('contact-form')?.classList.add('hidden');
    document.getElementById('success-message')?.classList.remove('hidden');
    // Clean URL
    window.history.replaceState({}, document.title, window.location.pathname);
  }
</script>
